<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Budgeting App</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f4f9;
            color: #333;
            margin: 0;
            padding: 0;
        }

        .container {
            width: 90%;
            max-width: 1200px;
            margin: auto;
            padding: 20px;
        }

        h1 {
            text-align: center;
            color: #007bff;
        }

        .input-section, .chart-section, .summary {
            background-color: #fff;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .input-section h2 {
            margin-top: 0;
            font-size: 24px;
            color: #333;
        }

        .input-section input, .input-section button {
            margin-top: 10px;
            box-sizing: border-box;
        }

        .input-section input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
        }

        .input-section button {
            background-color: #007bff;
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            display: inline-block;
        }

        .input-section button:hover {
            background-color: #0056b3;
        }

        .table-section {
            margin-bottom: 20px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-bottom: 10px;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #f4f4f4;
            font-size: 18px;
        }

        td input {
            width: calc(100% - 20px);
            padding: 8px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 16px;
            box-sizing: border-box;
        }

        .table-section button {
            background-color: #28a745;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
            display: inline-block;
        }

        .table-section button:hover {
            background-color: #218838;
        }

        .chart-section {
            display: none; /* Initially hidden */
            flex-direction: column;
            align-items: center;
        }

        .chart-section h2 {
            font-size: 24px;
            color: #333;
            margin-bottom: 20px;
        }

        .chart-heading {
            font-size: 18px;
            color: #007bff;
            margin-bottom: 10px;
        }

        .canvas-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin: 20px auto;
        }

        canvas {
            width: 100% !important; /* Make canvas responsive */
            height: auto !important; /* Maintain aspect ratio */
        }

        .summary p {
            font-size: 18px;
            margin: 0;
            padding: 5px 0;
        }

        /* Responsive Design */
        @media (max-width: 600px) {
            .input-section input, .input-section button {
                font-size: 14px;
                padding: 8px;
            }

            .table-section button {
                font-size: 14px;
                padding: 8px 12px;
            }

            table {
                font-size: 14px;
            }

            td input {
                font-size: 14px;
                padding: 6px;
            }

            canvas {
                width: 100% !important; /* Ensure charts are responsive on small screens */
                height: auto !important; /* Maintain aspect ratio */
            }
        }

        @media (min-width: 601px) and (max-width: 1024px) {
            .input-section input, .input-section button {
                font-size: 16px;
                padding: 10px;
            }

            .table-section button {
                font-size: 16px;
                padding: 10px 15px;
            }

            table {
                font-size: 16px;
            }

            td input {
                font-size: 16px;
                padding: 8px;
            }

            canvas {
                width: 100% !important; /* Ensure charts are responsive on medium screens */
                height: auto !important; /* Maintain aspect ratio */
            }
        }

        @media (min-width: 1025px) {
            .input-section input, .input-section button {
                font-size: 16px;
                padding: 12px;
            }

            .table-section button {
                font-size: 16px;
                padding: 12px 20px;
            }

            table {
                font-size: 16px;
            }

            td input {
                font-size: 16px;
                padding: 8px;
            }

            canvas {
                max-width: 400px !important; /* Set max-width of the canvas */
                max-height: 400px !important; /* Set max-height of the canvas */
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Budgeting App</h1>

        <div class="input-section">
            <h2>Set Monthly Income</h2>
            <input type="number" id="income" placeholder="Enter your income">
            <button onclick="setIncome()">Set Income</button>
        </div>

        <div class="table-section">
            <h2>Budget Items</h2>
            <table id="budgetTable">
                <thead>
                    <tr>
                        <th>Item</th>
                        <th>Amount</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Budget items will be dynamically added here -->
                </tbody>
            </table>
            <button onclick="addBudgetItemRow()">Add Budget Item Row</button>
        </div>

        <div class="table-section">
            <h2>Expense Items</h2>
            <table id="expenseTable">
                <thead>
                    <tr>
                        <th>Expense</th>
                        <th>Amount Spent</th>
                    </tr>
                </thead>
                <tbody>
                    <!-- Expense items will be dynamically added here -->
                </tbody>
            </table>
            <button onclick="addExpenseItemRow()">Add Expense Item Row</button>
        </div>

        <div class="chart-section" id="chartSection">
            <h2>Charts</h2>
            <div class="canvas-container">
                <div class="chart-heading">Budget Distribution (Pie Chart)</div>
                <canvas id="pieChart"></canvas>
            </div>
            <div class="canvas-container">
                <div class="chart-heading">Budget vs Spent (Bar Chart)</div>
                <canvas id="barChart"></canvas>
            </div>
            <div class="canvas-container">
                <div class="chart-heading">Expenses Over Time (Line Chart)</div>
                <canvas id="lineChart"></canvas>
            </div>
        </div>

        <div class="summary">
            <h2>Summary</h2>
            <p id="totalIncome">Total Income: $0</p>
            <p id="totalBudget">Total Budget: $0</p>
            <p id="totalSpent">Total Spent: $0</p>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script>
        let income = 0;
        let budget = {};
        let expenses = {};

        let pieChart = null;
        let barChart = null;
        let lineChart = null;

        function setIncome() {
            income = parseFloat(document.getElementById('income').value) || 0;
            document.getElementById('totalIncome').textContent = `Total Income: $${income.toFixed(2)}`;
            updateCharts();
        }

        function addBudgetItemRow() {
            const table = document.getElementById('budgetTable').getElementsByTagName('tbody')[0];
            const row = table.insertRow();
            const cell1 = row.insertCell(0);
            const cell2 = row.insertCell(1);

            cell1.innerHTML = `<input type="text" class="item" placeholder="Enter item name">`;
            cell2.innerHTML = `<input type="number" class="amount" placeholder="Enter amount" oninput="updateBudget()">`;
        }

        function addExpenseItemRow() {
            const table = document.getElementById('expenseTable').getElementsByTagName('tbody')[0];
            const row = table.insertRow();
            const cell1 = row.insertCell(0);
            const cell2 = row.insertCell(1);

            cell1.innerHTML = `<input type="text" class="expenseItem" placeholder="Enter expense item">`;
            cell2.innerHTML = `<input type="number" class="expenseAmount" placeholder="Enter amount spent" oninput="updateExpenses()">`;
        }

        function updateBudget() {
            const rows = document.querySelectorAll('#budgetTable tbody tr');
            budget = {};
            rows.forEach(row => {
                const item = row.querySelector('.item').value;
                const amount = parseFloat(row.querySelector('.amount').value) || 0;
                if (item) {
                    budget[item] = amount;
                }
            });
            updateCharts();
        }

        function updateExpenses() {
            const rows = document.querySelectorAll('#expenseTable tbody tr');
            expenses = {};
            rows.forEach(row => {
                const expenseItem = row.querySelector('.expenseItem').value;
                const expenseAmount = parseFloat(row.querySelector('.expenseAmount').value) || 0;
                if (expenseItem) {
                    expenses[expenseItem] = expenseAmount;
                }
            });
            updateCharts();
        }

        function updateCharts() {
            const totalBudget = Object.values(budget).reduce((a, b) => a + b, 0);
            const totalSpent = Object.values(expenses).reduce((a, b) => a + b, 0);
            document.getElementById('totalBudget').textContent = `Total Budget: $${totalBudget.toFixed(2)}`;
            document.getElementById('totalSpent').textContent = `Total Spent: $${totalSpent.toFixed(2)}`;

            const chartSection = document.getElementById('chartSection');
            if (totalBudget > 0 || totalSpent > 0) {
                chartSection.style.display = 'flex'; // Show chart section if there is data
            } else {
                chartSection.style.display = 'none'; // Hide chart section if there is no data
                return;
            }

            const ctxPie = document.getElementById('pieChart').getContext('2d');
            const ctxBar = document.getElementById('barChart').getContext('2d');
            const ctxLine = document.getElementById('lineChart').getContext('2d');

            // Destroy existing charts if they exist
            if (pieChart) pieChart.destroy();
            if (barChart) barChart.destroy();
            if (lineChart) lineChart.destroy();

            // Pie Chart
            pieChart = new Chart(ctxPie, {
                type: 'pie',
                data: {
                    labels: Object.keys(budget),
                    datasets: [{
                        data: Object.values(budget),
                        backgroundColor: ['#ff6384', '#36a2eb', '#cc65fe', '#ffce56', '#ff9999', '#66b3ff'],
                        borderColor: '#fff',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(tooltipItem) {
                                    let label = tooltipItem.label || '';
                                    if (label) {
                                        label += ': $' + tooltipItem.raw.toFixed(2);
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });

            // Bar Chart
            barChart = new Chart(ctxBar, {
                type: 'bar',
                data: {
                    labels: Object.keys(budget),
                    datasets: [
                        {
                            label: 'Budget',
                            data: Object.values(budget),
                            backgroundColor: '#36a2eb',
                            borderColor: '#fff',
                            borderWidth: 1
                        },
                        {
                            label: 'Spent',
                            data: Object.keys(budget).map(item => expenses[item] || 0),
                            backgroundColor: '#ff6384',
                            borderColor: '#fff',
                            borderWidth: 1
                        }
                    ]
                },
                options: {
                    responsive: true,
                    scales: {
                        x: {
                            stacked: true,
                        },
                        y: {
                            stacked: true,
                        }
                    },
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(tooltipItem) {
                                    let label = tooltipItem.dataset.label || '';
                                    if (label) {
                                        return label + ': $' + tooltipItem.raw.toFixed(2);
                                    }
                                    return '';
                                }
                            }
                        }
                    }
                }
            });

            // Line Chart
            lineChart = new Chart(ctxLine, {
                type: 'line',
                data: {
                    labels: Object.keys(expenses),
                    datasets: [{
                        label: 'Expenses Over Time',
                        data: Object.values(expenses),
                        borderColor: '#ff6384',
                        backgroundColor: 'rgba(255, 99, 132, 0.2)',
                        fill: true
                    }]
                },
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'top',
                        },
                        tooltip: {
                            callbacks: {
                                label: function(tooltipItem) {
                                    let label = tooltipItem.dataset.label || '';
                                    if (label) {
                                        return label + ': $' + tooltipItem.raw.toFixed(2);
                                    }
                                    return '';
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>