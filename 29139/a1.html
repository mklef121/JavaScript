<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>World Geography Explorer</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.7.1/dist/leaflet.css" />
    <style>
        body { font-family: 'Arial', sans-serif; margin: 0; padding: 0; background: #f4f4f9; }
        .container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; padding: 20px; }
        #map { height: 400px; border: 2px solid #3498db; }
        .quiz, .country-info, .virtual-tour { background: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 4px 8px rgba(0,0,0,0.1); }
        .colorful-text { color: #e74c3c; }
        #quiz button { margin-top: 10px; background-color: #2ecc71; border: none; color: white; padding: 10px 20px; cursor: pointer; }
        #countrySelect { width: 100%; padding: 10px; margin-bottom: 10px; }
        .landmark-image { width: 100%; cursor: pointer; transition: transform .2s; }
        .landmark-image:hover { transform: scale(1.05); }
        .modal { display: none; position: fixed; z-index: 1; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.7); }
        .modal-content { margin: 15% auto; padding: 20px; width: 80%; background: #fff; }
        .close { color: #aaa; float: right; font-size: 28px; font-weight: bold; cursor: pointer; }
    </style>
</head>
<body>

<div class="container">
    <div>
        <div id="map"></div>
        <div class="quiz">
            <h2 class="colorful-text">Geo-Quiz</h2>
            <div id="quiz"></div>
        </div>
    </div>
    <div>
        <div class="country-info">
            <select id="countrySelect"></select>
            <div id="countryInfo"></div>
        </div>
        <div class="virtual-tour">
            <h2 class="colorful-text">Virtual Tours</h2>
            <div id="landmarks"></div>
        </div>
    </div>
</div>

<div id="myModal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <p id="modalText"></p>
  </div>
</div>

<script src="https://unpkg.com/leaflet@1.7.1/dist/leaflet.js"></script>
<script src="https://maps.googleapis.com/maps/api/js?key=YOUR_GOOGLE_MAPS_API_KEY&callback=initMap" async defer></script>
<script>
    const restCountriesURL = 'https://restcountries.com/v3.1/all';
    let countries, map, currentQuiz, score = 0;

    // Initialize Leaflet map
    map = L.map('map').setView([0, 0], 2);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
        attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    // Fetch countries data
    fetch(restCountriesURL)
        .then(response => response.json())
        .then(data => {
            countries = data;
            populateCountrySelect();
            setupQuiz();
            setupVirtualTours();
        });

    function populateCountrySelect() {
        const select = document.getElementById('countrySelect');
        countries.sort((a, b) => a.name.common.localeCompare(b.name.common));
        countries.forEach(country => {
            const option = document.createElement('option');
            option.value = country.cca2;
            option.textContent = country.name.common;
            select.appendChild(option);
        });
        select.onchange = showCountryInfo;
    }

    function showCountryInfo() {
        const infoDiv = document.getElementById('countryInfo');
        const countryCode = document.getElementById('countrySelect').value;
        const country = countries.find(c => c.cca2 === countryCode);
        infoDiv.innerHTML = `
            <h3>${country.name.common}</h3>
            <p><strong>Capital:</strong> ${country.capital}</p>
            <p><strong>Population:</strong> ${country.population.toLocaleString()}</p>
            <p><strong>Area:</strong> ${country.area.toLocaleString()} kmÂ²</p>
            <p><strong>Interesting Fact:</strong> ${country.facts || 'No interesting facts available.'}</p>
        `;
    }

    function setupQuiz() {
        const quizDiv = document.getElementById('quiz');
        currentQuiz = generateQuestion();
        quizDiv.innerHTML = `<p>${currentQuiz.question}</p><button onclick="answerQuiz('${currentQuiz.answer}')">Answer</button>`;
    }

    function generateQuestion() {
        const randomCountry = countries[Math.floor(Math.random() * countries.length)];
        return {
            question: `What is the capital of ${randomCountry.name.common}?`,
            answer: randomCountry.capital[0]
        };
    }

    function answerQuiz(answer) {
        if (answer.toLowerCase() === currentQuiz.answer.toLowerCase()) {
            score += 2;
            setupQuiz();
        } else {
            alert(`Game Over! Your score: ${score}`);
            score = 0;
            setupQuiz();
        }
    }

    function setupVirtualTours() {
        const landmarksDiv = document.getElementById('landmarks');
        // Assuming we fetch landmark images and data from an API like Unsplash or a custom service
        // Here's a mock setup:
        ['Eiffel Tower', 'Great Wall', 'Taj Mahal'].forEach(name => {
            const img = document.createElement('img');
            img.src = `https://source.unsplash.com/featured/?${name}`; // Unsplash API for placeholder
            img.classList.add('landmark-image');
            img.onclick = () => showLandmarkInfo(name);
            landmarksDiv.appendChild(img);
        });
    }

    function showLandmarkInfo(name) {
        const modal = document.getElementById('myModal');
        const modalText = document.getElementById('modalText');
        modalText.textContent = `Info about ${name}...`; // Placeholder for actual data
        modal.style.display = "block";
    }

    // Close modal
    document.querySelector('.close').onclick = function() {
        document.getElementById('myModal').style.display = "none";
    };

    // Google Maps Street View would be initialized here with initMap function
    function initMap() {
        // Street View implementation would go here
    }
</script>

</body>
</html>