<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Piano Play Game</title>
<style>
    body { font-family: Arial, sans-serif; background: #f0f0f0; }
    #piano {
        position: relative; margin: 20px auto; width: 800px; height: 200px; background: #000; border-radius: 10px; padding: 20px;
    }
    .key {
        width: 40px; height: 180px; background: white; border: 1px solid #000; display: inline-block; position: relative;
        margin-left: -5px; border-radius: 0 0 5px 5px;
    }
    .black-key {
        width: 24px; height: 120px; background: #000; position: absolute; z-index: 1; margin-left: -12px; 
        border-radius: 0 0 3px 3px; color: white;
    }
    #gameArea { height: 200px; position: relative; }
    .ball { width: 20px; height: 20px; background: red; border-radius: 50%; position: absolute; }
    #controls, #score { text-align: center; margin: 10px; }
</style>
</head>
<body>

<div id="piano">
    <!-- Piano keys will be dynamically added here -->
</div>
<div id="gameArea"></div>
<div id="controls">
    <button onclick="startGame()">Start Game</button>
</div>
<div id="score">Score: 0 | Level: 1</div>

<script>
    const notes = ['C', 'C#', 'D', 'D#', 'E', 'F', 'F#', 'G', 'G#', 'A', 'A#', 'B'];
    const piano = document.getElementById('piano');
    let sounds = {}, currentKey, score = 0, level = 1, turns = 20, gameInterval;

    // Create piano keys
    notes.forEach((note, index) => {
        const key = document.createElement('div');
        key.className = 'key' + (note.includes('#') ? ' black-key' : '');
        key.dataset.note = note.replace('#', 's'); // for sound file naming
        if (note.includes('#')) key.style.left = `${index * 40 - 12}px`;
        piano.appendChild(key);
    });

    // Load sounds
    notes.forEach(note => {
        let audio = new Audio(`https://path-to-piano-sounds/${note.replace('#', 's')}.mp3`);
        sounds[note] = audio;
    });

    function playNote(note) {
        if (sounds[note]) {
            sounds[note].currentTime = 0;
            sounds[note].play();
        }
    }

    function dropBall() {
        const keys = document.querySelectorAll('.key');
        currentKey = keys[Math.floor(Math.random() * keys.length)];
        const ball = document.createElement('div');
        ball.className = 'ball';
        ball.style.top = '0px';
        ball.style.left = `${currentKey.offsetLeft + 10}px`;
        document.getElementById('gameArea').appendChild(ball);

        setTimeout(() => {
            ball.style.transition = 'top 2s linear';
            ball.style.top = '200px';
            setTimeout(() => {
                if (ball.parentElement) {
                    checkResult(ball);
                }
            }, 2000);
        }, 100);
    }

    function checkResult(ball) {
        if (ball.parentElement) {
            if (document.activeElement === currentKey) {
                score += 2;
                if (--turns === 0) nextLevel();
            } else {
                endGame();
            }
            updateScoreDisplay();
            ball.remove();
        }
    }

    function nextLevel() {
        if (level < 5) {
            level++;
            turns = 20;
        } else {
            celebrateWin();
        }
    }

    function celebrateWin() {
        alert('Congratulations! You have completed all levels!');
        resetGame();
    }

    function endGame() {
        alert('Game Over! Your score: ' + score);
        resetGame();
    }

    function resetGame() {
        clearInterval(gameInterval);
        level = 1;
        score = 0;
        turns = 20;
        updateScoreDisplay();
    }

    function updateScoreDisplay() {
        document.getElementById('score').innerText = `Score: ${score} | Level: ${level}`;
    }

    function startGame() {
        resetGame();
        gameInterval = setInterval(dropBall, 3000);
        document.querySelectorAll('.key').forEach(key => {
            key.addEventListener('click', function() { 
                playNote(key.dataset.note); 
                if (this === currentKey) checkResult(document.querySelector('.ball'));
            });
        });
    }

    startGame();
</script>

</body>
</html>