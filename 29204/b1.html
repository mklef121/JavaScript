<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Home Energy Dashboard</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bulma@0.9.3/css/bulma.min.css">
    <style>
        #energyGraph { width: 100%; height: 300px; }
        .appliance-icon { cursor: move; margin: 5px; }
        #dropZone { border: 2px dashed #ccc; border-radius: 20px; width: 300px; height: 200px; padding: 20px; }
        #batteryStatus { width: 100%; background-color: #ddd; }
        #batteryLevel { width: 50%; height: 30px; background-color: #4CAF50; transition: width 0.5s; }
    </style>
</head>
<body>
    <section class="section">
        <div class="container">
            <h1 class="title">Smart Home Energy Dashboard</h1>
            
            <!-- Real-time Energy Usage -->
            <div class="card">
                <div class="card-content">
                    <canvas id="energyGraph"></canvas>
                </div>
            </div>

            <!-- Drag and Drop Appliances -->
            <div class="columns">
                <div class="column">
                    <div id="appliances">
                        <img src="icon-fridge.png" class="appliance-icon" draggable="true" data-power="200">
                        <img src="icon-tv.png" class="appliance-icon" draggable="true" data-power="100">
                        <!-- More icons can be added here -->
                    </div>
                </div>
                <div class="column">
                    <div id="dropZone" class="box">Drop appliances here</div>
                </div>
            </div>

            <!-- Time-of-Use Scheduler -->
            <div class="card">
                <div class="card-content">
                    <input type="range" min="0" max="23" value="12" class="slider" id="timeSlider">
                    <p>Current Time: <span id="currentTime"></span></p>
                </div>
            </div>

            <!-- Battery Storage Status -->
            <div class="card">
                <div class="card-content">
                    <div id="batteryStatus">
                        <div id="batteryLevel"></div>
                    </div>
                    <p>Battery Charge: <span id="batteryPercentage">50%</span></p>
                </div>
            </div>
        </div>
    </section>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://code.jquery.com/jquery-3.6.0.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
    <script>
    $(function() {
        // Chart setup
        var ctx = document.getElementById('energyGraph').getContext('2d');
        var chart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: [],
                datasets: [{
                    label: 'Energy Usage (kWh)',
                    data: [],
                    borderColor: 'rgb(75, 192, 192)',
                    tension: 0.1
                }]
            },
            options: {
                animation: {
                    duration: 0
                }
            }
        });

        // Update graph with random data for demonstration
        function updateGraph() {
            chart.data.labels.push('');
            chart.data.datasets[0].data.push(Math.random() * 100);
            chart.update();
            if (chart.data.labels.length > 20) {
                chart.data.labels.shift();
                chart.data.datasets[0].data.shift();
            }
        }

        setInterval(updateGraph, 1000);

        // Drag and drop functionality
        $(".appliance-icon").draggable({
            revert: true
        });

        $("#dropZone").droppable({
            drop: function(event, ui) {
                let power = ui.draggable.data('power');
                console.log(`Added appliance with ${power}W power consumption`);
                // Here you would typically update your energy model
            }
        });

        // Time slider
        $("#timeSlider").on('input', function() {
            $("#currentTime").text(this.value + ":00");
            // Update energy rates or simulate different usage patterns here
        });

        // Battery animation
        function updateBattery() {
            let level = Math.floor(Math.random() * 100);
            document.getElementById('batteryLevel').style.width = level + '%';
            document.getElementById('batteryPercentage').textContent = level + '%';
        }

        setInterval(updateBattery, 5000);
    });
    </script>
</body>
</html>